
<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="format-detection" content="telephone=no,address=no">
  <meta name="apple-mobile-web-app-status-bar-style" content="white">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
  <title></title>
  <script>
    !function(x){function w(){var v,u,t,tes,s=x.document,r=s.documentElement,a=r.getBoundingClientRect().width;if(!v&&!u){var n=!!x.navigator.appVersion.match(/AppleWebKit.*Mobile.*/);v=x.devicePixelRatio;tes=x.devicePixelRatio;v=n?v:1,u=1/v}if(a>=640){r.style.fontSize="40px"}else{if(a<=320){r.style.fontSize="20px"}else{r.style.fontSize=a/320*20+"px"}}}x.addEventListener("resize",function(){w()});w()}(window);
  </script>
<body>
  <script>
    let varHead = 'hq_str_';
    let list = ['sh600422', 'sz002581', 'sz000590', 'sh600794', 'sh600875', 'sh600418', 'sh600737'];
    let body = document.getElementsByTagName('body')[0];
    let showText = (now, lastDayEnd) => ((now - lastDayEnd) / lastDayEnd * 100).toFixed(2) + '%';
    let date = new Date();
    let nowHour = date.getHours();
    let getData = () => {
      let script = document.createElement('script');
      script.type = 'text/javascript';
      script.src=`https://hq.sinajs.cn/list=${list.join(',')}`;
      body.appendChild(script);
      script.onload = () => {
        let content = document.getElementById('content');
        content.innerHTML = '';
        list.forEach(item => {
          let p = document.createElement('p');
          let data = window[varHead + item].split(',');
          let name = data[0];
          let todayStart = data[1];
          let lastDayEnd = data[2];
          let now = data[3];
          let highest = data[4];
          let lowest = data[5];
          let position = '上行';
          let range = showText(now, lastDayEnd);
          let highestRange = showText(highest, lastDayEnd);
          let lowestRange = showText(lowest, lastDayEnd);
          if (todayStart <= lastDayEnd && now <= lastDayEnd) {
            position = '下行';
          } else if (todayStart >= lastDayEnd || now >= lastDayEnd) {
            position = '平行';
          }
          p.innerHTML = name + ' ' + range + ' 高：' + highestRange + ' 低：' + lowestRange + ' ' + position;
          content.append(p);
        });
        content = null;
        body.removeChild(script);
      }
    }
    getData();
    if (nowHour >= 9 && nowHour <= 15) {
      setInterval(getData, 3000);
    }
  </script>
  <div style="font-size: 16px">
      <p>让object可迭代真的有意义么</p>

      <p>知乎的这个回答是很有水平的了：为什么es6里的object不可迭代？</p>
      
      <p>在stackoverflow中也有很高质量的回答：Why are Objects not Iterable in JavaScript?</p>
      
      在上面的回答中从技术方面说了为什么Object不能迭代（没有实现iterable），还说了以什么样的方式去遍历Object是个难题，所以把如何迭代的方式去留给了开发者。
      
      <p>但是还是要思考的一个问题就是：我们真有必要去迭代对象字面量么？</p>
      
      想一下我们要迭代对象字面量的什么呢？是keys还是values亦或者是entries，这三种方式在ES6提供的新的数据类型map里面都有呀，完全是可以代替object的。在这里不说object和map的区别，只是说说在ES6以后我们想把两个事物关联起来的时候，不一定要非得是用对象字面量了，map支持的更好一下。
      
      <p>对于什么时候用对象字面量（object）什么时候使用map我们可以做一下总结：</p>
      
      <p>对象字面量（object）应该是静态的，也就是说我们应该已经知道了里面有多少个，和对象的属性有什么</p>
      <p>使用对象字面量（object）的一般场景有：</p>
      <p>不需要去遍历对象字面量（object）的所有属性的时候</p>
      <p>我们知道了里面有多少个属性和对象的属性是什么的时候</p>
      需要去JSON.stringify和JSON.parse时候
      其他的情况用map，其他的情况包括：
      <p>key不是字符串或者symbol的时候</p>
      <p>需要去遍历的时候</p>
      要得到长度的时候
      <p>遍历的时候对顺序有要求的（对象字面量（object）可能不是按照你写的顺序）</p>
      也并不说是map就肯定比对象字面量（object）好，map也有如下的缺点：
      
      <p>不能使用对象解构 不能JSON.stringify/JSON.parse 参考</p>
      
      25.1.1.1 The Iterable Interface
      Maps vs Objects in ES6, When to use?
      Iterables and iterators in ECMAScript 6
      <p>想一下我们要迭代对象字面量的什么呢？是keys还是values亦或者是entries，这三种方式在ES6提供的新的数据类型map里面都有呀，完全是可以代替object的。在这里不说object和map的区别，只是说说在ES6以后我们想把两个事物关联起来的时候，不一定要非得是用对象字面量了，map支持的更好一下。</p>
      【翻译】Iterables and iterators in ECMAScript 6
      Maps vs Objects in ES6, When to use?
      迭代协议
      <p>ES6 你可能不知道的事 - 进阶篇</p>
      <p>深入浅出 ES6（二）：迭代器和 for-of 循环</p>
      <p>深入浅出 ES6（三）：生成器 Generators</p>
      <p>Javascript ES6 Iterators建议指南（含实例）</p>
      文章首发
      
      本文已经默认你已经知道generator是什么以及for...of和数据类型map怎么用了。
  </div>
  <div id='content' style="font-size: 14px">

  </div>
</html>
